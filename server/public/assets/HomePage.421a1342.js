import{_ as F,H as J,r as L,q as X,D as G,J as r,K as u,L as t,O as i,N as e,R as m,Q as W,b2 as g,S as p,b3 as Z,Y as ee,b4 as y,b5 as w,b6 as M,X as h,M as Q,T as B,U as te,b7 as ae,b8 as q,P as x,t as _,b9 as R,a4 as A,a5 as oe,a6 as le}from"./index.faa5a0cc.js";import{Q as se,a as N}from"./QPage.67fc0d04.js";import{Q as ne,a as K}from"./QTabs.ff664120.js";import{Q as f,a as s,b as v}from"./position-engine.33b2a5fa.js";import{Q as V}from"./QList.355a57bd.js";import{Q as O}from"./QBtnDropdown.de697891.js";import{Q as re,a as j}from"./QTabPanels.a5c23c06.js";import{C as b}from"./ClosePopup.d67c6f0d.js";import{u as de,d as E}from"./store.f6938b5c.js";import"./QResizeObserver.dbc2e57b.js";import"./rtl.b51694b1.js";import"./use-panel.799f51f7.js";import"./touch.3df10340.js";import"./axios.7331a07d.js";const $=C=>(oe("data-v-054c0050"),C=C(),le(),C),ie=$(()=>i("p",{class:"text-h6 text-center q-pa-md"},"\u4EFB\u52A1To-Do",-1)),ce={class:"column q-pa-xs q-ma-none"},ue={class:"col q-pa-xs"},me={class:"q-gutter-sm row justify-center"},pe={class:"q-gutter-y-md q-pa-none"},_e={class:"text-italic"},fe={key:0,class:"no-tasks absolute-center"},ve=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ke={class:"text-italic"},be={key:0,class:"no-tasks absolute-center"},ge=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ye={__name:"HomePage",setup(C){const T=J(),o=de(),z=L(null);X(async()=>{if(localStorage.getItem("token")!==null)try{await o.verifyUser().then(()=>{o.user?o.getTodolists():T.push("/index")}).catch(()=>{T.push("/index")})}catch{T.push("/index")}else T.push("/index")});const D=L("todo"),c=G({owner:"",todo:"",color:"text-black",createdAt:""}),U=async()=>{var n;await((n=z.value)==null?void 0:n.validate())&&(c.owner=o.user.email,c.createdAt=E.formatDate(Date.now(),"YYYY-MM-DD-HH:mm:ss"),o.createTodo(c).then(()=>{c.todo="",c.color="text-black",o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)}))},I=(n,l,a)=>{setTimeout(()=>{o.editTodo(n,l,a).then(()=>{o.successTip(o.systemMsg),o.getTodolists()}).catch(()=>{o.failureTip(o.systemMsg)})},300)},P=[{label:"\u9ED1\u8272",value:"text-black",color:"black"},{label:"\u84DD\u8272",value:"text-primary",color:"primary"},{label:"\u7D2B\u8272",value:"text-accent",color:"accent"},{label:"\u7EA2\u8272",value:"text-negative",color:"negative"},{label:"\u7EFF\u8272",value:"text-positive",color:"positive"},{label:"\u9EC4\u8272",value:"text-warning",color:"warning"},{label:"\u975B\u84DD\u8272",value:"text-indigo",color:"indigo"}],S=n=>{o.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await o.deleteTodo(n).then(()=>{o.successTip(o.systemMsg)}).catch(l=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},Y=n=>{o.$q.dialog({title:"\u7F16\u8F91\u5185\u5BB9",message:"\u8BF7\u8F93\u5165\u9700\u8981\u7F16\u8F91\u7684\u5185\u5BB9",prompt:{model:`${n.todo}`,type:"text"},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{const a=E.formatDate(Date.now(),"YYYY-MM-DD-HH:mm:ss");if(l==="")return o.failureTip("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");o.editTodo("todo",n._id,l,a).then(()=>{o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},H=n=>{o.$q.dialog({title:"\u9009\u62E9\u989C\u8272",message:"\u9009\u62E9\u4F60\u9700\u8981\u6539\u53D8\u7684\u989C\u8272",options:{type:"radio",model:`${n.color}`,inline:!0,items:P},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{o.editTodo("color",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(a=>{o.failureTip(o.systemMsg)})})};return(n,l)=>(r(),u(se,null,{default:t(()=>[ie,i("div",ce,[e(ee,{ref_key:"inputRef",ref:z,modelValue:c.todo,"onUpdate:modelValue":l[0]||(l[0]=a=>c.todo=a),"bg-color":"white",class:"col q-pa-none","bottom-slots":"","hide-bottom-space":"",rules:[a=>!!a||"\u8BF7\u8F93\u5165\u5185\u5BB9"],outlined:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5185\u5BB9","lazy-rules":"ondemand",autocomplete:"off",onKeyup:Z(U,["enter"])},{prepend:t(()=>[e(m,{name:"event"})]),append:t(()=>[e(W,{round:"",dense:"",flat:"",icon:"send",onClick:g(U,["stop"])},{default:t(()=>[e(N,null,{default:t(()=>[p(" \u53D1\u9001 ")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","rules","onKeyup"]),i("div",ue,[i("div",me,[(r(),y(M,null,w(P,(a,k)=>e(ae,{key:k,modelValue:c.color,"onUpdate:modelValue":d=>c.color=d,item:a,index:k,"keep-color":"",val:a.value,color:a.color},{default:t(()=>[e(N,{class:q("bg-"+a.color)},{default:t(()=>[p(x(a.label),1)]),_:2},1032,["class"])]),_:2},1032,["modelValue","onUpdate:modelValue","item","index","val","color"])),64))])])]),i("div",pe,[e(te,null,{default:t(()=>[e(ne,{modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=a=>D.value=a),dense:"",class:"text-grey q-pa-none","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t(()=>[e(K,{name:"todo",label:"\u4EFB\u52A1"}),e(K,{name:"done",label:"\u5DF2\u5B8C\u6210"})]),_:1},8,["modelValue"]),e(h),e(re,{modelValue:D.value,"onUpdate:modelValue":l[4]||(l[4]=a=>D.value=a),animated:""},{default:t(()=>[e(j,{class:"q-pa-none",name:"todo",style:{"min-height":"150px"}},{default:t(()=>[e(V,{separator:"",bordered:""},{default:t(()=>[(r(!0),y(M,null,w(Q(o).doingLists,(a,k)=>_((r(),u(f,{key:a._id,item:a,index:k,clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(R,{modelValue:a.isDone,"onUpdate:modelValue":d=>a.isDone=d,name:"isDone",color:"primary",onClick:g(d=>I("isDone",a._id,a.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[i("div",{class:q([a.color,"text-body2"])},x(a.todo),3),i("div",_e,x(a.createdAt),1)]),_:2},1024)]),_:2},1024),e(O,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[2]||(l[2]=g(()=>{},["stop"]))},{default:t(()=>[e(V,null,{default:t(()=>[_((r(),u(f,{clickable:"",onClick:d=>Y(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(a._id)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>H(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),Q(o).doingLists.length?B("",!0):(r(),y("div",fe,[e(m,{name:"check",size:"50px",color:"primary"}),ve]))]),_:1}),e(j,{class:"q-pa-none",name:"done",style:{"min-height":"150px"}},{default:t(()=>[e(V,{separator:"",bordered:""},{default:t(()=>[(r(!0),y(M,null,w(Q(o).doneLists,(a,k)=>_((r(),u(f,{key:a._id,item:a,index:k,clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(R,{modelValue:a.isDone,"onUpdate:modelValue":d=>a.isDone=d,color:"primary",onClick:g(d=>I("isDone",a._id,a.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[i("div",{class:q(a.color)},x(a.todo),3)]),_:2},1024),i("div",ke,x(a.createdAt),1)]),_:2},1024),e(O,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[3]||(l[3]=g(()=>{},["stop"]))},{default:t(()=>[e(V,null,{default:t(()=>[_((r(),u(f,{clickable:"",onClick:d=>Y(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(a._id)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>H(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),Q(o).doneLists.length?B("",!0):(r(),y("div",be,[e(m,{name:"check",size:"50px",color:"primary"}),ge]))]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1}))}};var Pe=F(ye,[["__scopeId","data-v-054c0050"]]);export{Pe as default};
