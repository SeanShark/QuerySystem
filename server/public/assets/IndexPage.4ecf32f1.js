import{u as y,b as _,c as T,Q as V,a as h}from"./QTabs.85230939.js";import{c as E,am as Q,an as q,a as k,w as M,H as P,r as f,q as U,D as R,J as L,b5 as $,N as s,L as o,U as C,M as u,O as n,bh as B,Y as b,R as p,S as g,P as v,bi as D,Q as w}from"./index.48789ced.js";import{Q as I,a as N}from"./QTabPanels.9d46531b.js";import{u as S}from"./store.56a5cbb1.js";import"./QResizeObserver.ea9e3643.js";import"./rtl.b51694b1.js";import"./use-panel.83ed09fb.js";import"./touch.3df10340.js";import"./axios.6b484fa5.js";var j=E({name:"QRouteTab",props:{...Q,...y},emits:_,setup(m,{slots:r,emit:d}){const l=q({useDisableForRouterLinkProps:!1}),{renderTab:i,$tabs:e}=T(m,r,d,{exact:k(()=>m.exact),...l});return M(()=>`${m.name} | ${m.exact} | ${(l.resolvedLink.value||{}).href}`,()=>{e.verifyRouteModel()}),()=>i(l.linkTag.value,l.linkAttrs.value)}});const A={class:"row"},z={class:"q-gutter-y-sm"},F=n("div",{class:"text-h5 q-pb-md"},"\u767B \u5F55 \u9875",-1),H=n("img",{src:"/icons/img_avatar.png"},null,-1),J={class:"q-pt-sm"},O={class:"q-mb-md"},Y={class:"q-my-md row justify-between"},G={class:"q-py-md"},oe={__name:"IndexPage",setup(m){const r=S(),d=P(),l=f(!0),i=f(!1);U(async()=>{await r.verifyUser().then(()=>{r.user&&d.push("/")})});const e=R({email:"",password:"",remember:!1,pwdError:!1,nameError:!1,errorMsg:""}),x=async()=>{e.nameError=!1,e.pwdError=!1;const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(e.email){if(!e.password)return e.pwdError=!0,e.errorMsg="\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}else return e.nameError=!0,e.errorMsg="\u8BF7\u8F93\u5165\u7528\u6237\u540D";if(!c.test(e.email)){e.nameError=!0,e.errorMsg="\u975E\u6CD5\u90AE\u7BB1\u5730\u5740";return}i.value=!0,await r.axios.post("/user/login",e).then(async a=>{a.status===200&&await r.verifyUser().then(()=>{i.value=!1,r.successTip("\u6210\u529F\u767B\u5F55"),d.push("/")})}).catch(a=>{i.value=!1,a.response.data.status==="nameError"?(e.nameError=!0,e.errorMsg=a.response.data.msg):a.response.data.status==="pwdError"?(e.pwdError=!0,e.errorMsg=a.response.data.msg):r.store.failureTip(a.response.data.msg)})};return(c,a)=>(L(),$("div",A,[s(C,{class:"shadow-13 fixed-center q-pa-none col-xs-12 col-md-6",style:{"max-width":"550px"}},{default:o(()=>[s(V,{modelValue:u(r).mainTab,"onUpdate:modelValue":a[0]||(a[0]=t=>u(r).mainTab=t),align:"justify","narrow-indicator":"",class:"q-mb-md"},{default:o(()=>[s(h,{class:"text-primary",name:"login",label:" \u767B \u5F55 "}),s(j,{class:"text-orange",name:"register",label:" \u6CE8 \u518C ",to:"/register"})]),_:1},8,["modelValue"]),n("div",z,[s(I,{modelValue:u(r).mainTab,"onUpdate:modelValue":a[5]||(a[5]=t=>u(r).mainTab=t),animated:"","transition-prev":"fade","transition-next":"fade",class:"text-center q-ma-none q-pa-none"},{default:o(()=>[s(N,{class:"q-gutter-sm",name:"login"},{default:o(()=>[F,s(B,{size:"120px",class:"shadow-3"},{default:o(()=>[H]),_:1}),n("div",J,[s(b,{modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=t=>e.email=t),filled:"",type:"email",label:"\u90AE\u7BB1\u5730\u5740",class:"q-py-xs","bottom-slots":"","hide-bottom-space":"",error:e.nameError},{before:o(()=>[s(p,{color:"teal",name:"mail"})]),error:o(()=>[g(v(e.errorMsg),1)]),_:1},8,["modelValue","error"])]),n("div",O,[s(b,{modelValue:e.password,"onUpdate:modelValue":a[3]||(a[3]=t=>e.password=t),filled:"",type:l.value?"password":"text",label:"\u5BC6\u7801","bottom-slots":"","hide-bottom-space":"",error:e.pwdError},{before:o(()=>[s(p,{name:"lock"})]),append:o(()=>[s(p,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=t=>l.value=!l.value)},null,8,["name"])]),error:o(()=>[g(v(e.errorMsg),1)]),_:1},8,["modelValue","type","error"])]),n("div",Y,[s(D,{modelValue:e.remember,"onUpdate:modelValue":a[4]||(a[4]=t=>e.remember=t),class:"left",label:"\u8BB0\u4F4F\u6211"},null,8,["modelValue"]),s(w,{flat:"",color:"indigo-7",label:"\u5FD8\u8BB0\u5BC6\u7801\uFF1F",to:"/forgot",class:"text-italic"})]),n("div",G,[s(w,{color:"primary",class:"full-width","icon-right":"login",label:"\u767B \u5F55",loading:i.value,onClick:x},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]))}};export{oe as default};
