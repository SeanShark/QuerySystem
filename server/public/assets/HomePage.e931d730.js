import{_ as E,H as F,r as H,q as J,D as W,J as r,K as u,L as a,O as i,N as e,R as m,Q as X,b0 as y,S as p,b1 as G,X as Z,b2 as b,b3 as w,b4 as q,W as h,M as V,T as R,U as ee,b5 as ae,a1 as M,P as x,t as _,b6 as N,a2 as A,a3 as te,a4 as oe}from"./index.c5216a1f.js";import{Q as le,a as K}from"./QPage.15c1a3c0.js";import{Q as se,a as O}from"./QTabs.25bfd638.js";import{Q as f,a as s,b as v}from"./QItemLabel.392feda9.js";import{Q as D}from"./QList.2f793933.js";import{Q as Y}from"./QBtnDropdown.23143786.js";import{Q as ne,a as j}from"./QTabPanels.c770706d.js";import{C as k}from"./ClosePopup.3e0fd4d4.js";import{u as re,d as de}from"./store.6d6a3883.js";import"./QResizeObserver.8f4109ce.js";import"./rtl.b51694b1.js";import"./use-panel.b7e29401.js";import"./touch.3df10340.js";import"./axios.7331a07d.js";const $=C=>(te("data-v-506dd856"),C=C(),oe(),C),ie=$(()=>i("p",{class:"text-h6 text-center q-pa-md"},"\u4EFB\u52A1To-Do",-1)),ce={class:"column q-pa-xs q-ma-none"},ue={class:"col q-pa-xs"},me={class:"q-gutter-sm row justify-center"},pe={class:"q-gutter-y-md q-pa-none"},_e={class:"text-italic"},fe={key:0,class:"no-tasks absolute-center"},ve=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ge={class:"text-italic"},ke={key:0,class:"no-tasks absolute-center"},ye=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),be={__name:"HomePage",setup(C){const T=F(),o=re(),z=H(null);J(async()=>{if(localStorage.getItem("token")!==null)try{await o.verifyUser().then(()=>{o.user?o.getTodolists():T.push("/index")}).catch(()=>{T.push("/index")})}catch{T.push("/index")}else T.push("/index")});const Q=H("todo"),c=W({owner:"",todo:"",color:"text-black",createdAt:""}),U=async()=>{var n;await((n=z.value)==null?void 0:n.validate())&&(c.owner=o.user.email,c.createdAt=de.formatDate(Date.now(),"YYYY-MM-DD-HH:mm:ss"),o.createTodo(c).then(()=>{c.todo="",c.color="text-black",o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)}))},I=(n,l,t)=>{setTimeout(()=>{o.editTodo(n,l,t).then(()=>{o.successTip(o.systemMsg),o.getTodolists()}).catch(()=>{o.failureTip(o.systemMsg)})},300)},P=[{label:"\u9ED1\u8272",value:"text-black",color:"black"},{label:"\u84DD\u8272",value:"text-primary",color:"primary"},{label:"\u7D2B\u8272",value:"text-accent",color:"accent"},{label:"\u7EA2\u8272",value:"text-negative",color:"negative"},{label:"\u7EFF\u8272",value:"text-positive",color:"positive"},{label:"\u9EC4\u8272",value:"text-warning",color:"warning"},{label:"\u975B\u84DD\u8272",value:"text-indigo",color:"indigo"}],S=n=>{o.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await o.deleteTodo(n).then(()=>{o.successTip(o.systemMsg)}).catch(l=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},L=n=>{o.$q.dialog({title:"\u7F16\u8F91\u5185\u5BB9",message:"\u8BF7\u8F93\u5165\u9700\u8981\u7F16\u8F91\u7684\u5185\u5BB9",prompt:{model:`${n.todo}`,type:"text"},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{if(l==="")return o.failureTip("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");o.editTodo("todo",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},B=n=>{o.$q.dialog({title:"\u9009\u62E9\u989C\u8272",message:"\u9009\u62E9\u4F60\u9700\u8981\u6539\u53D8\u7684\u989C\u8272",options:{type:"radio",model:`${n.color}`,inline:!0,items:P},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{o.editTodo("color",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(t=>{o.failureTip(o.systemMsg)})})};return(n,l)=>(r(),u(le,{class:"bg-grey-3"},{default:a(()=>[ie,i("div",ce,[e(Z,{ref_key:"inputRef",ref:z,modelValue:c.todo,"onUpdate:modelValue":l[0]||(l[0]=t=>c.todo=t),"bg-color":"white",class:"col q-pa-none","bottom-slots":"","hide-bottom-space":"",rules:[t=>!!t||"\u8BF7\u8F93\u5165\u5185\u5BB9"],outlined:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5185\u5BB9","lazy-rules":"ondemand",autocomplete:"off",onKeyup:G(U,["enter"])},{prepend:a(()=>[e(m,{name:"event"})]),append:a(()=>[e(X,{round:"",dense:"",flat:"",icon:"send",onClick:y(U,["stop"])},{default:a(()=>[e(K,null,{default:a(()=>[p(" \u53D1\u9001 ")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","rules","onKeyup"]),i("div",ue,[i("div",me,[(r(),b(q,null,w(P,(t,g)=>e(ae,{key:g,modelValue:c.color,"onUpdate:modelValue":d=>c.color=d,item:t,index:g,"keep-color":"",val:t.value,color:t.color},{default:a(()=>[e(K,{class:M("bg-"+t.color)},{default:a(()=>[p(x(t.label),1)]),_:2},1032,["class"])]),_:2},1032,["modelValue","onUpdate:modelValue","item","index","val","color"])),64))])])]),i("div",pe,[e(ee,null,{default:a(()=>[e(se,{modelValue:Q.value,"onUpdate:modelValue":l[1]||(l[1]=t=>Q.value=t),dense:"",class:"text-grey q-pa-none","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(O,{name:"todo",label:"\u4EFB\u52A1"}),e(O,{name:"done",label:"\u5DF2\u5B8C\u6210"})]),_:1},8,["modelValue"]),e(h),e(ne,{modelValue:Q.value,"onUpdate:modelValue":l[4]||(l[4]=t=>Q.value=t),animated:""},{default:a(()=>[e(j,{class:"q-pa-none",name:"todo",style:{"min-height":"150px"}},{default:a(()=>[e(D,{separator:"",bordered:""},{default:a(()=>[(r(!0),b(q,null,w(V(o).doingLists,(t,g)=>_((r(),u(f,{key:t._id,item:t,index:g,clickable:""},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(N,{modelValue:t.isDone,"onUpdate:modelValue":d=>t.isDone=d,name:"isDone",color:"primary",onClick:y(d=>I("isDone",t._id,t.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[i("div",{class:M([t.color,"text-body2"])},x(t.todo),3),i("div",_e,x(t.createdAt),1)]),_:2},1024)]),_:2},1024),e(Y,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[2]||(l[2]=y(()=>{},["stop"]))},{default:a(()=>[e(D,null,{default:a(()=>[_((r(),u(f,{clickable:"",onClick:d=>L(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(t._id)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>B(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),V(o).doingLists.length?R("",!0):(r(),b("div",fe,[e(m,{name:"check",size:"50px",color:"primary"}),ve]))]),_:1}),e(j,{class:"q-pa-none",name:"done",style:{"min-height":"150px"}},{default:a(()=>[e(D,{separator:"",bordered:""},{default:a(()=>[(r(!0),b(q,null,w(V(o).doneLists,(t,g)=>_((r(),u(f,{key:t._id,item:t,index:g,clickable:""},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(N,{modelValue:t.isDone,"onUpdate:modelValue":d=>t.isDone=d,color:"primary",onClick:y(d=>I("isDone",t._id,t.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[i("div",{class:M(t.color)},x(t.todo),3)]),_:2},1024),i("div",ge,x(t.createdAt),1)]),_:2},1024),e(Y,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[3]||(l[3]=y(()=>{},["stop"]))},{default:a(()=>[e(D,null,{default:a(()=>[_((r(),u(f,{clickable:"",onClick:d=>L(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(t._id)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>B(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(v,null,{default:a(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),V(o).doneLists.length?R("",!0):(r(),b("div",ke,[e(m,{name:"check",size:"50px",color:"primary"}),ye]))]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1}))}};var Pe=E(be,[["__scopeId","data-v-506dd856"]]);export{Pe as default};
